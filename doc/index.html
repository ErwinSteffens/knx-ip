<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Documentation Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.slate.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Documentation</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="AdditionalInfo.html">AdditionalInfo</a></li><li><a href="CEMIMessage.html">CEMIMessage</a></li><li><a href="ControlField.html">ControlField</a></li><li><a href="ControlField.TYPE_GROUP.html">ControlField.TYPE_GROUP</a></li><li><a href="ControlField.TYPE_INDIVIDUAL.html">ControlField.TYPE_INDIVIDUAL</a></li><li><a href="CRD.html">CRD</a></li><li><a href="CRI.html">CRI</a></li><li><a href="DataPoint.html">DataPoint</a></li><li><a href="DataPointType.html">DataPointType</a></li><li><a href="DeviceInfo.html">DeviceInfo</a></li><li><a href="HPAI.html">HPAI</a></li><li><a href="IPConfig.html">IPConfig</a></li><li><a href="IPCurrentConfig.html">IPCurrentConfig</a></li><li><a href="KNXAddress.html">KNXAddress</a></li><li><a href="KNXAddress.LEVEL_THREE.html">KNXAddress.LEVEL_THREE</a></li><li><a href="KNXAddress.LEVEL_TWO.html">KNXAddress.LEVEL_TWO</a></li><li><a href="KNXAddress.TYPE_GROUP.html">KNXAddress.TYPE_GROUP</a></li><li><a href="KNXAddress.TYPE_INDIVIDUAL.html">KNXAddress.TYPE_INDIVIDUAL</a></li><li><a href="KNXAddresses.html">KNXAddresses</a></li><li><a href="KNXClient.html">KNXClient</a></li><li><a href="KNXConnectionStateRequest.html">KNXConnectionStateRequest</a></li><li><a href="KNXConnectionStateResponse.html">KNXConnectionStateResponse</a></li><li><a href="KNXConnectRequest.html">KNXConnectRequest</a></li><li><a href="KNXConnectResponse.html">KNXConnectResponse</a></li><li><a href="KNXDescriptionRequest.html">KNXDescriptionRequest</a></li><li><a href="KNXDescriptionResponse.html">KNXDescriptionResponse</a></li><li><a href="KNXDisconnectRequest.html">KNXDisconnectRequest</a></li><li><a href="KNXDisconnectResponse.html">KNXDisconnectResponse</a></li><li><a href="KNXHeader.html">KNXHeader</a></li><li><a href="KNXPacket.html">KNXPacket</a></li><li><a href="KNXProtocol.html">KNXProtocol</a></li><li><a href="KNXProtocol.CEMIFactory.html">KNXProtocol.CEMIFactory</a></li><li><a href="KNXProtocol.CRD.html">KNXProtocol.CRD</a></li><li><a href="KNXProtocol.CRI.html">KNXProtocol.CRI</a></li><li><a href="KNXProtocol.DeviceInfo.html">KNXProtocol.DeviceInfo</a></li><li><a href="KNXProtocol.DIB.html">KNXProtocol.DIB</a></li><li><a href="KNXProtocol.HPAI.html">KNXProtocol.HPAI</a></li><li><a href="KNXProtocol.IPConfig.html">KNXProtocol.IPConfig</a></li><li><a href="KNXProtocol.IPCurrentConfig.html">KNXProtocol.IPCurrentConfig</a></li><li><a href="KNXProtocol.KNX_CONSTANTS.html">KNXProtocol.KNX_CONSTANTS</a></li><li><a href="KNXProtocol.KNXAddress.html">KNXProtocol.KNXAddress</a></li><li><a href="KNXProtocol.KNXConnectionStateRequest.html">KNXProtocol.KNXConnectionStateRequest</a></li><li><a href="KNXProtocol.KNXConnectionStateResponse.html">KNXProtocol.KNXConnectionStateResponse</a></li><li><a href="KNXProtocol.KNXConnectRequest.html">KNXProtocol.KNXConnectRequest</a></li><li><a href="KNXProtocol.KNXConnectResponse.html">KNXProtocol.KNXConnectResponse</a></li><li><a href="KNXProtocol.KNXDescriptionRequest.html">KNXProtocol.KNXDescriptionRequest</a></li><li><a href="KNXProtocol.KNXDescriptionResponse.html">KNXProtocol.KNXDescriptionResponse</a></li><li><a href="KNXProtocol.KNXDisconnectRequest.html">KNXProtocol.KNXDisconnectRequest</a></li><li><a href="KNXProtocol.KNXDisconnectResponse.html">KNXProtocol.KNXDisconnectResponse</a></li><li><a href="KNXProtocol.KNXHeader.html">KNXProtocol.KNXHeader</a></li><li><a href="KNXProtocol.KNXSearchRequest.html">KNXProtocol.KNXSearchRequest</a></li><li><a href="KNXProtocol.KNXSearchResponse.html">KNXProtocol.KNXSearchResponse</a></li><li><a href="KNXProtocol.KNXTunnelingAck.html">KNXProtocol.KNXTunnelingAck</a></li><li><a href="KNXProtocol.KNXTunnelingRequest.html">KNXProtocol.KNXTunnelingRequest</a></li><li><a href="KNXProtocol.LDataCon.html">KNXProtocol.LDataCon</a></li><li><a href="KNXProtocol.LDataInd.html">KNXProtocol.LDataInd</a></li><li><a href="KNXProtocol.LDataReq.html">KNXProtocol.LDataReq</a></li><li><a href="KNXProtocol.ServiceFamilies.html">KNXProtocol.ServiceFamilies</a></li><li><a href="KNXProtocol.TunnelCRI.html">KNXProtocol.TunnelCRI</a></li><li><a href="KNXSearchRequest.html">KNXSearchRequest</a></li><li><a href="KNXSearchResponse.html">KNXSearchResponse</a></li><li><a href="KNXTunnelingAck.html">KNXTunnelingAck</a></li><li><a href="KNXTunnelingRequest.html">KNXTunnelingRequest</a></li><li><a href="KNXTunnelSocket.html">KNXTunnelSocket</a></li><li><a href="KNXUtils.html">KNXUtils</a></li><li><a href="LDataCon.html">LDataCon</a></li><li><a href="LDataInd.html">LDataInd</a></li><li><a href="LDataReq.html">LDataReq</a></li><li><a href="NPDU.html">NPDU</a></li><li><a href="NPDU.GROUP_READ.html">NPDU.GROUP_READ</a></li><li><a href="NPDU.GROUP_RESPONSE.html">NPDU.GROUP_RESPONSE</a></li><li><a href="NPDU.GROUP_WRITE.html">NPDU.GROUP_WRITE</a></li><li><a href="NPDU.INDIVIDUAL_READ.html">NPDU.INDIVIDUAL_READ</a></li><li><a href="NPDU.INDIVIDUAL_RESPONSE.html">NPDU.INDIVIDUAL_RESPONSE</a></li><li><a href="NPDU.INDIVIDUAL_WRITE.html">NPDU.INDIVIDUAL_WRITE</a></li><li><a href="ServiceFamilies.html">ServiceFamilies</a></li><li><a href="TLVInfo.html">TLVInfo</a></li><li><a href="TunnelCRI.html">TunnelCRI</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#event:ready">event:ready</a></li><li><a href="KNXClient.html#event:connected">KNXClient#event:connected</a></li><li><a href="KNXClient.html#event:disconnected">KNXClient#event:disconnected</a></li><li><a href="KNXClient.html#event:discover">KNXClient#event:discover</a></li><li><a href="KNXClient.html#event:error">KNXClient#event:error</a></li><li><a href="KNXClient.html#event:indication">KNXClient#event:indication</a></li><li><a href="KNXClient.html#event:response">KNXClient#event:response</a></li><li><a href="KNXTunnelSocket.html#event:indication">KNXTunnelSocket#event:indication</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html">Global</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><h1>knx-ip</h1>
<p>Pure javascript implementation of KNXnet/IP protocol for Node.JS.</p>
<p>KNX-IP allows you to discover KNX gateways in your home installation and create a tunnel connection to
pass knx messages to read status of sensors (wind, sun, temperature,...), lamp switches, ... and
also switch on/off lamps, send signals to stores, ...</p>
<h6>Installation</h6>
<p>Make sure your machine has Node.JS (version 6.x or greater) and do:</p>
<pre class="prettyprint source"><code>npm install knx-ip
</code></pre>
<h4>Documentation</h4>
<p>For more information, check the
<a href="http://www.gdnet.be/knx-ip/doc/">knx-ip documentation</a></p>
<h4>Usage</h4>
<p>Use the KNXClient class to discover existing KNX Gateways.
The KNXClient.startDiscovery(ip) function starts a new discovery on the interface
matching the specified ip address.  This process runs for 20 seconds.
The KNXClient will emit &quot;discover&quot; messages when a new knx gateway is discovered.</p>
<p>To send KNX messages to your knx home installation, first create a tunnel to your knx gateway.
A tunnel is created with the KNXTunnelSocket class.  The single argument is the knx bus address to use to connect
to the gateway (this should be a unique knx address in your environment).
Use this socket to connect() to the ip address of the knx gateway.
Once connected, you can read() the status of readable knx components and set the state of any knx
writeable component.</p>
<p>In the example below, we attempt to discover the knx gateway using the KNXClient.startDiscovery function.
Once the gateway is identified, we setup a tunnel using the knxSocket.connect() method.
We then read the status (on or off) of a lamp with knx address 1.2.15 and then switch the lamp on,
read the status again before switching the lamp off.</p>
<pre class="prettyprint source lang-javascript"><code>&quot;use strict&quot;;

const {KNXClient, KNXTunnelSocket, KNXProtocol, DataPoints} = require(&quot;knx-ip&quot;);

const knxClient = new KNXClient();

knxClient.on(&quot;error&quot;, err => {
    if (err) {
        console.log(err);
    }
});

// Call discoverCB when a knx gateway has been discovered.
knxClient.on(&quot;discover&quot;,  info => {
    const [ip,port] = info.split(&quot;:&quot;);
    discoverCB(ip,port);
});

knxClient.on(&quot;ready&quot;, () => {
    console.log(&quot;Ready. Starting discovery&quot;);
});

// start auto discovery on interface with ip 192.168.1.99
knxClient.startDiscovery(&quot;192.168.1.99&quot;);

const wait = (t=3000) => {
    return new Promise(resolve => {
        setTimeout(() => { resolve(); }, t);
    });
};

const handleBusEvent = function(srcAddress, dstAddress, npdu) {
    console.log(`${srcAddress.toString()} -> ${dstAddress.toString()} :`, npdu.dataValue);
};

// Actions to perform when a KNX gateway has been discovered.
const discoverCB = (ip, port) => {
        console.log(&quot;Connecting to &quot;, ip, port);
        // Create a knx address for a lamp switch on knx bus address 1.1.15
        const lampSwitchAddress = new KNXProtocol.KNXAddress(&quot;1.1.15&quot;, KNXProtocol.KNXAddress.TYPE_GROUP);
        // Create a Datapoint of type Switch to control the lamp
        const lampSwitch = new DataPoints.Switch(lampSwitchAddress);
        // Create a Datapoint of type Switch to read the lamp status
        // This time using the createDataPoint function
        const lampStatus = DataPoints.createDataPoint(
            new KNXProtocol.KNXAddress(&quot;1.2.15&quot;, KNXProtocol.KNXAddress.TYPE_GROUP),
            &quot;Switch&quot;
        );
        // Create tunnel socket with source knx address 1.1.100
        const knxSocket = new KNXTunnelSocket(&quot;1.1.100&quot;);
        // Bind the datapoints with the socket
        lampSwitch.bind(knxSocket);
        lampStatus.bind(knxSocket);
        // Connect to the knx gateway on ip:port
        knxSocket.connect(ip, port)
            .then(() => console.log(&quot;Connected through channel id &quot;, knxSocket.channelID))
            .then(() => console.log(&quot;Reading lamp status&quot;))
            .then(() => lampStatus.read())
            .then(val => console.log(&quot;Lamp status:&quot;, val))
            .then(() => console.log(&quot;Sending lamp ON&quot;))
            .then(() => lampSwitch.setOn())
            .then(() => wait())
            .then(() => lampStatus.read())
            .then(val => console.log(&quot;Lamp status:&quot;, val))
            .then(() => lampSwitch.setOff())
            .then(() => wait(1000))
            .then(() => lampStatus.read())
            .then(val => console.log(&quot;Lamp status:&quot;, val))
            .then(() => {
                console.log(&quot;Starting bus monitoring&quot;);
                knxSocket.on(&quot;indication&quot;, handleBusEvent);
                knxSocket.monitorBus()
            })
            .then(() => wait(9000))
            .catch(err => {console.log(err);})
            .then(() => process.exit(0));
};
</code></pre>
<pre class="prettyprint source"><code>Ready. Starting discovery
Connecting to  192.168.1.158 3671
Connected through channel id  35
Reading lamp status
Lamp status: 0
Sending lamp ON
Lamp status: 1
Lamp status: 0
Starting bus monitoring
1.1.16 -> 9.1.2 : &lt;Buffer 00 64>
1.1.16 -> 9.1.5 : &lt;Buffer 42 d2 7c c8>
1.1.16 -> 9.1.6 : &lt;Buffer 41 c0 bd 5d>

</code></pre></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	GDNet s.p.r.l.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a>
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>